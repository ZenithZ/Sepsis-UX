/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Renderer, IterableDiffers, KeyValueDiffers, ChangeDetectorRef, ElementRef, ChangeDetectionStrategy } from "@angular/core";
import { IgGridBase } from "../iggrid/iggridbase";
var IgHierarchicalGridComponent = /** @class */ (function (_super) {
    tslib_1.__extends(IgHierarchicalGridComponent, _super);
    function IgHierarchicalGridComponent(el, renderer, differs, kvalDiffers, cdr) {
        return _super.call(this, el, renderer, differs, kvalDiffers, cdr) || this;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    IgHierarchicalGridComponent.prototype.deleteRow = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var element = jQuery(this._el);
        /** @type {?} */
        var tr = element.find("tr[data-id='" + id + "']");
        /** @type {?} */
        var childContainer = tr.next("tr[data-container]");
        if (tr.length > 0) {
            tr.remove();
            childContainer.remove();
            element.data("igGrid").dataSource.deleteRow(id, true);
            element.data("igGrid").dataSource._removeTransactionsByRecordId(id);
        }
    };
    /**
     * @param {?} rec
     * @param {?} currValue
     * @param {?} key
     * @return {?}
     */
    IgHierarchicalGridComponent.prototype.updateRow = /**
     * @param {?} rec
     * @param {?} currValue
     * @param {?} key
     * @return {?}
     */
    function (rec, currValue, key) {
        /** @type {?} */
        var element = jQuery(this._el);
        /** @type {?} */
        var childrenDataProperty = this["childrenDataProperty"] || this.options.childrenDataProperty;
        /** @type {?} */
        var childGrid = element.data(this._widgetName).allChildrenWidgets().filter((/**
         * @param {?} indx
         * @return {?}
         */
        function (indx) {
            /** @type {?} */
            var parentRow = jQuery(this.element).closest('tr[data-container]').prev();
            /** @type {?} */
            var parentGridPK = parentRow.closest(".ui-iggrid-table").data("igGrid").options.primaryKey;
            return (childrenDataProperty === key ||
                parentRow.next("[data-container]").find("table[role='grid']").attr("id").contains("_" + key + "_"))
                && parentRow.attr("data-id") == rec[parentGridPK];
        }));
        if (childGrid.length > 0) {
            jQuery(childGrid).each((/**
             * @return {?}
             */
            function () {
                this.dataBind();
            }));
        }
        else {
            _super.prototype.updateRow.call(this, rec, currValue, key);
        }
    };
    /**
     * @return {?}
     */
    IgHierarchicalGridComponent.prototype.markForCheck = /**
     * @return {?}
     */
    function () {
        _super.prototype.markForCheck.call(this);
        /** @type {?} */
        var element = jQuery(this._el);
        /** @type {?} */
        var childrenDataProperty = this["childrenDataProperty"] || this.options.childrenDataProperty;
        /** @type {?} */
        var childGrids = element.data(this._widgetName).allChildrenWidgets();
        for (var i = 0; i < childGrids.length; i++) {
            childGrids[i].dataBind();
        }
    };
    /**
     * Data binds the hierarchical grid. No child grids will be created or rendered by default, unless there is initialExpandDepth >= 0 set.
     */
    /* istanbul ignore next */
    /**
     * Data binds the hierarchical grid. No child grids will be created or rendered by default, unless there is initialExpandDepth >= 0 set.
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.dataBind = /**
     * Data binds the hierarchical grid. No child grids will be created or rendered by default, unless there is initialExpandDepth >= 0 set.
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    /**
     * Returns the element of the root grid (igGrid)
     */
    /* istanbul ignore next */
    /**
     * Returns the element of the root grid (igGrid)
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.root = /**
     * Returns the element of the root grid (igGrid)
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    /**
     * Returns the widget object of the root grid (igGrid)
     */
    /* istanbul ignore next */
    /**
     * Returns the widget object of the root grid (igGrid)
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.rootWidget = /**
     * Returns the widget object of the root grid (igGrid)
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    /**
     * Returns a flat list of all child grid elements (recursive)
     */
    /* istanbul ignore next */
    /**
     * Returns a flat list of all child grid elements (recursive)
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.allChildren = /**
     * Returns a flat list of all child grid elements (recursive)
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    /**
     * Expands or collapses (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param callback     Specifies a custom function to be called when parent row is toggled(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was toggled
     */
    /* istanbul ignore next */
    /**
     * Expands or collapses (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is toggled(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was toggled
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.toggle = /**
     * Expands or collapses (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is toggled(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was toggled
     * @return {?}
     */
    /* istanbul ignore next */
    function (element, callback) { return; };
    ;
    /**
     * Expands (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments first is hierarchical grid object, second is the row element that was expanded
     */
    /* istanbul ignore next */
    /**
     * Expands (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments first is hierarchical grid object, second is the row element that was expanded
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.expand = /**
     * Expands (toggles) a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments first is hierarchical grid object, second is the row element that was expanded
     * @return {?}
     */
    /* istanbul ignore next */
    function (id, callback) { return; };
    ;
    /**
     * Collapses a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was collapsed
     */
    /* istanbul ignore next */
    /**
     * Collapses a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was collapsed
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.collapse = /**
     * Collapses a parent row
     * 				Note: This method is asynchronous which means that it returns immediately and any subsequent code will execute in parallel. This may lead to runtime errors. To avoid them put the subsequent code in the callback parameter provided by the method.
     *
     * @param {?} id     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @param {?=} callback     Specifies a custom function to be called when parent row is expanded(optional). Takes 2 arguments - first is hierarchical grid object, second is the row element that was collapsed
     * @return {?}
     */
    /* istanbul ignore next */
    function (id, callback) { return; };
    ;
    /**
     * Checks if a parent row is currently collapsed
     *
     * @param element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     */
    /* istanbul ignore next */
    /**
     * Checks if a parent row is currently collapsed
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.collapsed = /**
     * Checks if a parent row is currently collapsed
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @return {?}
     */
    /* istanbul ignore next */
    function (element) { return; };
    ;
    /**
     * Checks if a parent row is populated with data
     *
     * @param element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     */
    /* istanbul ignore next */
    /**
     * Checks if a parent row is populated with data
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.populated = /**
     * Checks if a parent row is populated with data
     *
     * @param {?} element     accepts a dom element, or a jquery wrapped dom element that should be a TR and should specify a parent row
     * @return {?}
     */
    /* istanbul ignore next */
    function (element) { return; };
    ;
    /**
     * Commits pending transactions to the client data source for main and all child grids.
     */
    /* istanbul ignore next */
    /**
     * Commits pending transactions to the client data source for main and all child grids.
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.commit = /**
     * Commits pending transactions to the client data source for main and all child grids.
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    /**
     * Clears the transaction log (delegates to igDataSource). Note that this does not update the UI. In case the UI must be updated, set the second parameter "updateUI" to true, which will trigger a call to dataBind() to re-render the contents.
     *
     * @param rebind     Whether to perform a rebind.
     */
    /* istanbul ignore next */
    /**
     * Clears the transaction log (delegates to igDataSource). Note that this does not update the UI. In case the UI must be updated, set the second parameter "updateUI" to true, which will trigger a call to dataBind() to re-render the contents.
     *
     * @param {?=} rebind     Whether to perform a rebind.
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.rollback = /**
     * Clears the transaction log (delegates to igDataSource). Note that this does not update the UI. In case the UI must be updated, set the second parameter "updateUI" to true, which will trigger a call to dataBind() to re-render the contents.
     *
     * @param {?=} rebind     Whether to perform a rebind.
     * @return {?}
     */
    /* istanbul ignore next */
    function (rebind) { return; };
    ;
    /**
     * Posts to the settings.updateUrl using $.ajax, by serializing the changes as url params
     *
     * @param success    Specifies a custom function to be called when AJAX request to the updateUrl option succeeds(optional)
     * @param error    Specifies a custom function to be called when AJAX request to the updateUrl option fails(optional)
     */
    /* istanbul ignore next */
    /**
     * Posts to the settings.updateUrl using $.ajax, by serializing the changes as url params
     *
     * @param {?} success    Specifies a custom function to be called when AJAX request to the updateUrl option succeeds(optional)
     * @param {?} error    Specifies a custom function to be called when AJAX request to the updateUrl option fails(optional)
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.saveChanges = /**
     * Posts to the settings.updateUrl using $.ajax, by serializing the changes as url params
     *
     * @param {?} success    Specifies a custom function to be called when AJAX request to the updateUrl option succeeds(optional)
     * @param {?} error    Specifies a custom function to be called when AJAX request to the updateUrl option fails(optional)
     * @return {?}
     */
    /* istanbul ignore next */
    function (success, error) { return; };
    ;
    /**
     * Destroys the hierarchical grid by recursively destroying all child grids
     */
    /* istanbul ignore next */
    /**
     * Destroys the hierarchical grid by recursively destroying all child grids
     * @return {?}
     */
    /* istanbul ignore next */
    IgHierarchicalGridComponent.prototype.destroy = /**
     * Destroys the hierarchical grid by recursively destroying all child grids
     * @return {?}
     */
    /* istanbul ignore next */
    function () { return; };
    ;
    IgHierarchicalGridComponent.decorators = [
        { type: Component, args: [{
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    selector: "ig-hierarchical-grid",
                    template: "<ng-content></ng-content>",
                    inputs: ["widgetId", "options", "changeDetectionInterval", "disabled", "create", "initialDataBindDepth", "initialExpandDepth", "odata", "rest", "maxDataBindDepth", "defaultChildrenDataProperty", "autoGenerateLayouts", "expandCollapseAnimations", "expandColWidth", "pathSeparator", "animationDuration", "expandTooltip", "collapseTooltip", "columnLayouts", "width", "height", "autoAdjustHeight", "avgRowHeight", "avgColumnWidth", "defaultColumnWidth", "autoGenerateColumns", "virtualization", "virtualizationMode", "requiresDataBinding", "rowVirtualization", "columnVirtualization", "virtualizationMouseWheelStep", "adjustVirtualHeights", "templatingEngine", "columns", "dataSource", "dataSourceUrl", "dataSourceType", "responseDataKey", "responseTotalRecCountKey", "requestType", "responseContentType", "showHeader", "showFooter", "fixedHeaders", "fixedFooters", "caption", "features", "tabIndex", "localSchemaTransform", "primaryKey", "serializeTransactionLog", "autoCommit", "aggregateTransactions", "autoFormat", "renderCheckboxes", "updateUrl", "restSettings", "alternateRowStyles", "autofitLastColumn", "enableHoverStyles", "enableUTCDates", "mergeUnboundColumns", "jsonpRequest", "enableResizeContainerCheck", "featureChooserIconDisplay", "scrollSettings"],
                    outputs: ["rowExpanding", "rowExpanded", "rowCollapsing", "rowCollapsed", "childrenPopulating", "childrenPopulated", "childGridRendered", "childGridCreating", "childGridCreated", "cellClick", "cellRightClick", "dataBinding", "dataBound", "rendering", "rendered", "dataRendering", "dataRendered", "headerRendering", "headerRendered", "footerRendering", "footerRendered", "headerCellRendered", "rowsRendering", "rowsRendered", "schemaGenerated", "columnsCollectionModified", "requestError", "created", "destroyed"]
                }] }
    ];
    /** @nocollapse */
    IgHierarchicalGridComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer },
        { type: IterableDiffers },
        { type: KeyValueDiffers },
        { type: ChangeDetectorRef }
    ]; };
    return IgHierarchicalGridComponent;
}(IgGridBase));
export { IgHierarchicalGridComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWdoaWVyYXJjaGljYWxncmlkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXItd3JhcHBlcnMvIiwic291cmNlcyI6WyJsaWIvaWdoaWVyYXJjaGljYWxncmlkL2lnaGllcmFyY2hpY2FsZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGlCQUFpQixFQUFFLFVBQVUsRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5SSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFJbEQ7SUFPaUQsdURBQThCO0lBQzNFLHFDQUFZLEVBQWMsRUFBRSxRQUFrQixFQUFFLE9BQXdCLEVBQUUsV0FBNEIsRUFBRSxHQUFzQjtlQUFJLGtCQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUM7SUFBRSxDQUFDOzs7OztJQUVuTCwrQ0FBUzs7OztJQUFULFVBQVUsRUFBRTs7WUFDSixPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7O1lBQzFCLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDOztZQUM3QyxjQUFjLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztRQUVsRCxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ2YsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ1osY0FBYyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3hCLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEQsT0FBTyxDQUFDLElBQUks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QkFBbUIsRUFBRSxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxpQkFBaUIsRUFBRSwyQkFBMkIsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQztpQkFDbmdCOzs7O2dCQVhrRixVQUFVO2dCQUF6RSxRQUFRO2dCQUFFLGVBQWU7Z0JBQUUsZUFBZTtnQkFBRSxpQkFBaUI7O0lBeUpqRixrQ0FBQztDQUFBLEFBcEpELENBT2lELFVBQVUsR0E2STFEO1NBN0lZLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgUmVuZGVyZXIsIEl0ZXJhYmxlRGlmZmVycywgS2V5VmFsdWVEaWZmZXJzLCBDaGFuZ2VEZXRlY3RvclJlZiwgRWxlbWVudFJlZiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgSWdHcmlkQmFzZSB9IGZyb20gXCIuLi9pZ2dyaWQvaWdncmlkYmFzZVwiO1xuXG5kZWNsYXJlIHZhciBqUXVlcnk6IGFueTtcblxuQENvbXBvbmVudCh7XG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgc2VsZWN0b3I6IFwiaWctaGllcmFyY2hpY2FsLWdyaWRcIixcbiAgICB0ZW1wbGF0ZTogXCI8bmctY29udGVudD48L25nLWNvbnRlbnQ+XCIsXG4gICAgaW5wdXRzOiBbXCJ3aWRnZXRJZFwiLCBcIm9wdGlvbnNcIiwgXCJjaGFuZ2VEZXRlY3Rpb25JbnRlcnZhbFwiLCBcImRpc2FibGVkXCIsIFwiY3JlYXRlXCIsIFwiaW5pdGlhbERhdGFCaW5kRGVwdGhcIiwgXCJpbml0aWFsRXhwYW5kRGVwdGhcIiwgXCJvZGF0YVwiLCBcInJlc3RcIiwgXCJtYXhEYXRhQmluZERlcHRoXCIsIFwiZGVmYXVsdENoaWxkcmVuRGF0YVByb3BlcnR5XCIsIFwiYXV0b0dlbmVyYXRlTGF5b3V0c1wiLCBcImV4cGFuZENvbGxhcHNlQW5pbWF0aW9uc1wiLCBcImV4cGFuZENvbFdpZHRoXCIsIFwicGF0aFNlcGFyYXRvclwiLCBcImFuaW1hdGlvbkR1cmF0aW9uXCIsIFwiZXhwYW5kVG9vbHRpcFwiLCBcImNvbGxhcHNlVG9vbHRpcFwiLCBcImNvbHVtbkxheW91dHNcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcImF1dG9BZGp1c3RIZWlnaHRcIiwgXCJhdmdSb3dIZWlnaHRcIiwgXCJhdmdDb2x1bW5XaWR0aFwiLCBcImRlZmF1bHRDb2x1bW5XaWR0aFwiLCBcImF1dG9HZW5lcmF0ZUNvbHVtbnNcIiwgXCJ2aXJ0dWFsaXphdGlvblwiLCBcInZpcnR1YWxpemF0aW9uTW9kZVwiLCBcInJlcXVpcmVzRGF0YUJpbmRpbmdcIiwgXCJyb3dWaXJ0dWFsaXphdGlvblwiLCBcImNvbHVtblZpcnR1YWxpemF0aW9uXCIsIFwidmlydHVhbGl6YXRpb25Nb3VzZVdoZWVsU3RlcFwiLCBcImFkanVzdFZpcnR1YWxIZWlnaHRzXCIsIFwidGVtcGxhdGluZ0VuZ2luZVwiLCBcImNvbHVtbnNcIiwgXCJkYXRhU291cmNlXCIsIFwiZGF0YVNvdXJjZVVybFwiLCBcImRhdGFTb3VyY2VUeXBlXCIsIFwicmVzcG9uc2VEYXRhS2V5XCIsIFwicmVzcG9uc2VUb3RhbFJlY0NvdW50S2V5XCIsIFwicmVxdWVzdFR5cGVcIiwgXCJyZXNwb25zZUNvbnRlbnRUeXBlXCIsIFwic2hvd0hlYWRlclwiLCBcInNob3dGb290ZXJcIiwgXCJmaXhlZEhlYWRlcnNcIiwgXCJmaXhlZEZvb3RlcnNcIiwgXCJjYXB0aW9uXCIsIFwiZmVhdHVyZXNcIiwgXCJ0YWJJbmRleFwiLCBcImxvY2FsU2NoZW1hVHJhbnNmb3JtXCIsIFwicHJpbWFyeUtleVwiLCBcInNlcmlhbGl6ZVRyYW5zYWN0aW9uTG9nXCIsIFwiYXV0b0NvbW1pdFwiLCBcImFnZ3JlZ2F0ZVRyYW5zYWN0aW9uc1wiLCBcImF1dG9Gb3JtYXRcIiwgXCJyZW5kZXJDaGVja2JveGVzXCIsIFwidXBkYXRlVXJsXCIsIFwicmVzdFNldHRpbmdzXCIsIFwiYWx0ZXJuYXRlUm93U3R5bGVzXCIsIFwiYXV0b2ZpdExhc3RDb2x1bW5cIiwgXCJlbmFibGVIb3ZlclN0eWxlc1wiLCBcImVuYWJsZVVUQ0RhdGVzXCIsIFwibWVyZ2VVbmJvdW5kQ29sdW1uc1wiLCBcImpzb25wUmVxdWVzdFwiLCBcImVuYWJsZVJlc2l6ZUNvbnRhaW5lckNoZWNrXCIsIFwiZmVhdHVyZUNob29zZXJJY29uRGlzcGxheVwiLCBcInNjcm9sbFNldHRpbmdzXCJdLFxuICAgIG91dHB1dHM6IFtcInJvd0V4cGFuZGluZ1wiLCBcInJvd0V4cGFuZGVkXCIsIFwicm93Q29sbGFwc2luZ1wiLCBcInJvd0NvbGxhcHNlZFwiLCBcImNoaWxkcmVuUG9wdWxhdGluZ1wiLCBcImNoaWxkcmVuUG9wdWxhdGVkXCIsIFwiY2hpbGRHcmlkUmVuZGVyZWRcIiwgXCJjaGlsZEdyaWRDcmVhdGluZ1wiLCBcImNoaWxkR3JpZENyZWF0ZWRcIiwgXCJjZWxsQ2xpY2tcIiwgXCJjZWxsUmlnaHRDbGlja1wiLCBcImRhdGFCaW5kaW5nXCIsIFwiZGF0YUJvdW5kXCIsIFwicmVuZGVyaW5nXCIsIFwicmVuZGVyZWRcIiwgXCJkYXRhUmVuZGVyaW5nXCIsIFwiZGF0YVJlbmRlcmVkXCIsIFwiaGVhZGVyUmVuZGVyaW5nXCIsIFwiaGVhZGVyUmVuZGVyZWRcIiwgXCJmb290ZXJSZW5kZXJpbmdcIiwgXCJmb290ZXJSZW5kZXJlZFwiLCBcImhlYWRlckNlbGxSZW5kZXJlZFwiLCBcInJvd3NSZW5kZXJpbmdcIiwgXCJyb3dzUmVuZGVyZWRcIiwgXCJzY2hlbWFHZW5lcmF0ZWRcIiwgXCJjb2x1bW5zQ29sbGVjdGlvbk1vZGlmaWVkXCIsIFwicmVxdWVzdEVycm9yXCIsIFwiY3JlYXRlZFwiLCBcImRlc3Ryb3llZFwiXVxufSlcbmV4cG9ydCBjbGFzcyBJZ0hpZXJhcmNoaWNhbEdyaWRDb21wb25lbnQgZXh0ZW5kcyBJZ0dyaWRCYXNlPElnSGllcmFyY2hpY2FsR3JpZD4ge1xuICAgIGNvbnN0cnVjdG9yKGVsOiBFbGVtZW50UmVmLCByZW5kZXJlcjogUmVuZGVyZXIsIGRpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycywga3ZhbERpZmZlcnM6IEtleVZhbHVlRGlmZmVycywgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikgeyBzdXBlcihlbCwgcmVuZGVyZXIsIGRpZmZlcnMsIGt2YWxEaWZmZXJzLCBjZHIpOyB9XG5cbiAgICBkZWxldGVSb3coaWQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkodGhpcy5fZWwpLFxuICAgICAgICAgICAgdHIgPSBlbGVtZW50LmZpbmQoXCJ0cltkYXRhLWlkPSdcIiArIGlkICsgXCInXVwiKSxcbiAgICAgICAgICAgIGNoaWxkQ29udGFpbmVyID0gdHIubmV4dChcInRyW2RhdGEtY29udGFpbmVyXVwiKTtcblxuICAgICAgICBpZiAodHIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdHIucmVtb3ZlKCk7XG4gICAgICAgICAgICBjaGlsZENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgIGVsZW1lbnQuZGF0YShcImlnR3JpZFwiKS5kYXRhU291cmNlLmRlbGV0ZVJvdyhpZCwgdHJ1ZSk7XG4gICAgICAgICAgICBlbGVtZW50LmRhdGEoXCJpZ0dyaWRcIikuZGF0YVNvdXJjZS5fcmVtb3ZlVHJhbnNhY3Rpb25zQnlSZWNvcmRJZChpZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUm93KHJlYywgY3VyclZhbHVlLCBrZXkpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeSh0aGlzLl9lbCk7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuRGF0YVByb3BlcnR5ID0gdGhpc1tcImNoaWxkcmVuRGF0YVByb3BlcnR5XCJdIHx8IHRoaXMub3B0aW9ucy5jaGlsZHJlbkRhdGFQcm9wZXJ0eTtcblxuICAgICAgICB2YXIgY2hpbGRHcmlkID0gZWxlbWVudC5kYXRhKHRoaXMuX3dpZGdldE5hbWUpLmFsbENoaWxkcmVuV2lkZ2V0cygpLmZpbHRlcihmdW5jdGlvbiAoaW5keCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudFJvdyA9IGpRdWVyeSh0aGlzLmVsZW1lbnQpLmNsb3Nlc3QoJ3RyW2RhdGEtY29udGFpbmVyXScpLnByZXYoKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRHcmlkUEsgPSBwYXJlbnRSb3cuY2xvc2VzdChcIi51aS1pZ2dyaWQtdGFibGVcIikuZGF0YShcImlnR3JpZFwiKS5vcHRpb25zLnByaW1hcnlLZXk7XG4gICAgICAgICAgICByZXR1cm4gKGNoaWxkcmVuRGF0YVByb3BlcnR5ID09PSBrZXkgfHxcbiAgICAgICAgICAgICAgICBwYXJlbnRSb3cubmV4dChcIltkYXRhLWNvbnRhaW5lcl1cIikuZmluZChcInRhYmxlW3JvbGU9J2dyaWQnXVwiKS5hdHRyKFwiaWRcIikuY29udGFpbnMoXCJfXCIgKyBrZXkgKyBcIl9cIikpXG4gICAgICAgICAgICAgICAgJiYgcGFyZW50Um93LmF0dHIoXCJkYXRhLWlkXCIpID09IHJlY1twYXJlbnRHcmlkUEtdO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNoaWxkR3JpZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqUXVlcnkoY2hpbGRHcmlkKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFCaW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLnVwZGF0ZVJvdyhyZWMsIGN1cnJWYWx1ZSwga2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgbWFya0ZvckNoZWNrKCkge1xuICAgICAgICBzdXBlci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeSh0aGlzLl9lbCk7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuRGF0YVByb3BlcnR5ID0gdGhpc1tcImNoaWxkcmVuRGF0YVByb3BlcnR5XCJdIHx8IHRoaXMub3B0aW9ucy5jaGlsZHJlbkRhdGFQcm9wZXJ0eTtcbiAgICAgICAgdmFyIGNoaWxkR3JpZHMgPSBlbGVtZW50LmRhdGEodGhpcy5fd2lkZ2V0TmFtZSkuYWxsQ2hpbGRyZW5XaWRnZXRzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRHcmlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2hpbGRHcmlkc1tpXS5kYXRhQmluZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERhdGEgYmluZHMgdGhlIGhpZXJhcmNoaWNhbCBncmlkLiBObyBjaGlsZCBncmlkcyB3aWxsIGJlIGNyZWF0ZWQgb3IgcmVuZGVyZWQgYnkgZGVmYXVsdCwgdW5sZXNzIHRoZXJlIGlzIGluaXRpYWxFeHBhbmREZXB0aCA+PSAwIHNldC5cbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyBkYXRhQmluZCgpOiB2b2lkIHsgcmV0dXJuOyB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZWxlbWVudCBvZiB0aGUgcm9vdCBncmlkIChpZ0dyaWQpXG4gICAgICovXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwdWJsaWMgcm9vdCgpOiBPYmplY3QgeyByZXR1cm47IH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB3aWRnZXQgb2JqZWN0IG9mIHRoZSByb290IGdyaWQgKGlnR3JpZClcbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyByb290V2lkZ2V0KCk6IE9iamVjdCB7IHJldHVybjsgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmbGF0IGxpc3Qgb2YgYWxsIGNoaWxkIGdyaWQgZWxlbWVudHMgKHJlY3Vyc2l2ZSlcbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyBhbGxDaGlsZHJlbigpOiBPYmplY3QgeyByZXR1cm47IH07XG5cbiAgICAvKipcbiAgICAgKiBFeHBhbmRzIG9yIGNvbGxhcHNlcyAodG9nZ2xlcykgYSBwYXJlbnQgcm93XG4gICAgICogXHRcdFx0XHROb3RlOiBUaGlzIG1ldGhvZCBpcyBhc3luY2hyb25vdXMgd2hpY2ggbWVhbnMgdGhhdCBpdCByZXR1cm5zIGltbWVkaWF0ZWx5IGFuZCBhbnkgc3Vic2VxdWVudCBjb2RlIHdpbGwgZXhlY3V0ZSBpbiBwYXJhbGxlbC4gVGhpcyBtYXkgbGVhZCB0byBydW50aW1lIGVycm9ycy4gVG8gYXZvaWQgdGhlbSBwdXQgdGhlIHN1YnNlcXVlbnQgY29kZSBpbiB0aGUgY2FsbGJhY2sgcGFyYW1ldGVyIHByb3ZpZGVkIGJ5IHRoZSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAgICAgYWNjZXB0cyBhIGRvbSBlbGVtZW50LCBvciBhIGpxdWVyeSB3cmFwcGVkIGRvbSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIGEgVFIgYW5kIHNob3VsZCBzcGVjaWZ5IGEgcGFyZW50IHJvd1xuICAgICAqIEBwYXJhbSBjYWxsYmFjayAgICAgU3BlY2lmaWVzIGEgY3VzdG9tIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHBhcmVudCByb3cgaXMgdG9nZ2xlZChvcHRpb25hbCkuIFRha2VzIDIgYXJndW1lbnRzIC0gZmlyc3QgaXMgaGllcmFyY2hpY2FsIGdyaWQgb2JqZWN0LCBzZWNvbmQgaXMgdGhlIHJvdyBlbGVtZW50IHRoYXQgd2FzIHRvZ2dsZWRcbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyB0b2dnbGUoZWxlbWVudDogRWxlbWVudCwgY2FsbGJhY2s/OiBGdW5jdGlvbik6IHZvaWQgeyByZXR1cm47IH07XG5cbiAgICAvKipcbiAgICAgKiBFeHBhbmRzICh0b2dnbGVzKSBhIHBhcmVudCByb3dcbiAgICAgKiBcdFx0XHRcdE5vdGU6IFRoaXMgbWV0aG9kIGlzIGFzeW5jaHJvbm91cyB3aGljaCBtZWFucyB0aGF0IGl0IHJldHVybnMgaW1tZWRpYXRlbHkgYW5kIGFueSBzdWJzZXF1ZW50IGNvZGUgd2lsbCBleGVjdXRlIGluIHBhcmFsbGVsLiBUaGlzIG1heSBsZWFkIHRvIHJ1bnRpbWUgZXJyb3JzLiBUbyBhdm9pZCB0aGVtIHB1dCB0aGUgc3Vic2VxdWVudCBjb2RlIGluIHRoZSBjYWxsYmFjayBwYXJhbWV0ZXIgcHJvdmlkZWQgYnkgdGhlIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAgICAgYWNjZXB0cyBhIGRvbSBlbGVtZW50LCBvciBhIGpxdWVyeSB3cmFwcGVkIGRvbSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIGEgVFIgYW5kIHNob3VsZCBzcGVjaWZ5IGEgcGFyZW50IHJvd1xuICAgICAqIEBwYXJhbSBjYWxsYmFjayAgICAgU3BlY2lmaWVzIGEgY3VzdG9tIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHBhcmVudCByb3cgaXMgZXhwYW5kZWQob3B0aW9uYWwpLiBUYWtlcyAyIGFyZ3VtZW50cyBmaXJzdCBpcyBoaWVyYXJjaGljYWwgZ3JpZCBvYmplY3QsIHNlY29uZCBpcyB0aGUgcm93IGVsZW1lbnQgdGhhdCB3YXMgZXhwYW5kZWRcbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyBleHBhbmQoaWQ6IEVsZW1lbnQsIGNhbGxiYWNrPzogRnVuY3Rpb24pOiB2b2lkIHsgcmV0dXJuOyB9O1xuXG4gICAgLyoqXG4gICAgICogQ29sbGFwc2VzIGEgcGFyZW50IHJvd1xuICAgICAqIFx0XHRcdFx0Tm90ZTogVGhpcyBtZXRob2QgaXMgYXN5bmNocm9ub3VzIHdoaWNoIG1lYW5zIHRoYXQgaXQgcmV0dXJucyBpbW1lZGlhdGVseSBhbmQgYW55IHN1YnNlcXVlbnQgY29kZSB3aWxsIGV4ZWN1dGUgaW4gcGFyYWxsZWwuIFRoaXMgbWF5IGxlYWQgdG8gcnVudGltZSBlcnJvcnMuIFRvIGF2b2lkIHRoZW0gcHV0IHRoZSBzdWJzZXF1ZW50IGNvZGUgaW4gdGhlIGNhbGxiYWNrIHBhcmFtZXRlciBwcm92aWRlZCBieSB0aGUgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkICAgICBhY2NlcHRzIGEgZG9tIGVsZW1lbnQsIG9yIGEganF1ZXJ5IHdyYXBwZWQgZG9tIGVsZW1lbnQgdGhhdCBzaG91bGQgYmUgYSBUUiBhbmQgc2hvdWxkIHNwZWNpZnkgYSBwYXJlbnQgcm93XG4gICAgICogQHBhcmFtIGNhbGxiYWNrICAgICBTcGVjaWZpZXMgYSBjdXN0b20gZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gcGFyZW50IHJvdyBpcyBleHBhbmRlZChvcHRpb25hbCkuIFRha2VzIDIgYXJndW1lbnRzIC0gZmlyc3QgaXMgaGllcmFyY2hpY2FsIGdyaWQgb2JqZWN0LCBzZWNvbmQgaXMgdGhlIHJvdyBlbGVtZW50IHRoYXQgd2FzIGNvbGxhcHNlZFxuICAgICAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHVibGljIGNvbGxhcHNlKGlkOiBFbGVtZW50LCBjYWxsYmFjaz86IEZ1bmN0aW9uKTogdm9pZCB7IHJldHVybjsgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIHBhcmVudCByb3cgaXMgY3VycmVudGx5IGNvbGxhcHNlZFxuICAgICAqXG4gICAgICogQHBhcmFtIGVsZW1lbnQgICAgIGFjY2VwdHMgYSBkb20gZWxlbWVudCwgb3IgYSBqcXVlcnkgd3JhcHBlZCBkb20gZWxlbWVudCB0aGF0IHNob3VsZCBiZSBhIFRSIGFuZCBzaG91bGQgc3BlY2lmeSBhIHBhcmVudCByb3dcbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyBjb2xsYXBzZWQoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4geyByZXR1cm47IH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBwYXJlbnQgcm93IGlzIHBvcHVsYXRlZCB3aXRoIGRhdGFcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVtZW50ICAgICBhY2NlcHRzIGEgZG9tIGVsZW1lbnQsIG9yIGEganF1ZXJ5IHdyYXBwZWQgZG9tIGVsZW1lbnQgdGhhdCBzaG91bGQgYmUgYSBUUiBhbmQgc2hvdWxkIHNwZWNpZnkgYSBwYXJlbnQgcm93XG4gICAgICovXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwdWJsaWMgcG9wdWxhdGVkKGVsZW1lbnQ6IEVsZW1lbnQpOiBib29sZWFuIHsgcmV0dXJuOyB9O1xuXG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBwZW5kaW5nIHRyYW5zYWN0aW9ucyB0byB0aGUgY2xpZW50IGRhdGEgc291cmNlIGZvciBtYWluIGFuZCBhbGwgY2hpbGQgZ3JpZHMuXG4gICAgICovXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwdWJsaWMgY29tbWl0KCk6IHZvaWQgeyByZXR1cm47IH07XG5cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIHRyYW5zYWN0aW9uIGxvZyAoZGVsZWdhdGVzIHRvIGlnRGF0YVNvdXJjZSkuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90IHVwZGF0ZSB0aGUgVUkuIEluIGNhc2UgdGhlIFVJIG11c3QgYmUgdXBkYXRlZCwgc2V0IHRoZSBzZWNvbmQgcGFyYW1ldGVyIFwidXBkYXRlVUlcIiB0byB0cnVlLCB3aGljaCB3aWxsIHRyaWdnZXIgYSBjYWxsIHRvIGRhdGFCaW5kKCkgdG8gcmUtcmVuZGVyIHRoZSBjb250ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWJpbmQgICAgIFdoZXRoZXIgdG8gcGVyZm9ybSBhIHJlYmluZC5cbiAgICAgKi9cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHB1YmxpYyByb2xsYmFjayhyZWJpbmQ/OiBib29sZWFuKTogdm9pZCB7IHJldHVybjsgfTtcblxuICAgIC8qKlxuICAgICAqIFBvc3RzIHRvIHRoZSBzZXR0aW5ncy51cGRhdGVVcmwgdXNpbmcgJC5hamF4LCBieSBzZXJpYWxpemluZyB0aGUgY2hhbmdlcyBhcyB1cmwgcGFyYW1zXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3VjY2VzcyAgICBTcGVjaWZpZXMgYSBjdXN0b20gZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gQUpBWCByZXF1ZXN0IHRvIHRoZSB1cGRhdGVVcmwgb3B0aW9uIHN1Y2NlZWRzKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSBlcnJvciAgICBTcGVjaWZpZXMgYSBjdXN0b20gZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gQUpBWCByZXF1ZXN0IHRvIHRoZSB1cGRhdGVVcmwgb3B0aW9uIGZhaWxzKG9wdGlvbmFsKVxuICAgICAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHVibGljIHNhdmVDaGFuZ2VzKHN1Y2Nlc3M6IEZ1bmN0aW9uLCBlcnJvcjogRnVuY3Rpb24pOiB2b2lkIHsgcmV0dXJuOyB9O1xuXG4gICAgLyoqXG4gICAgICogRGVzdHJveXMgdGhlIGhpZXJhcmNoaWNhbCBncmlkIGJ5IHJlY3Vyc2l2ZWx5IGRlc3Ryb3lpbmcgYWxsIGNoaWxkIGdyaWRzXG4gICAgICovXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHsgcmV0dXJuOyB9O1xufSJdfQ==